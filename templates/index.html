<!DOCTYPE html>
<html >
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../static/assets/css/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-amber.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDStore Project</title>
    <style>
#line-chart {
  margin: 0 auto;
  height: 350px;
}
#line-chart1 {
  margin: 0 auto;
  height: 350px;
}
#line-chart2 {
  margin: 0 auto;
  height: 350px;
}
#line-chart3 {
  margin: 0 auto;
  height: 350px;
}
#line-chart4 {
  margin: 0 auto;
  height: 450px;
}
#line-chart5 {
  margin: 0 auto;
  height: 450px;
}

#line-chart6 {
  margin: 0 auto;
  height: 450px;
}

</style>
<body onload = "postFormData();">
<!-- Always shows a header, even in smaller screens. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <!-- Title -->
        <span class="mdl-layout-title">Project GDStore</span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation. We hide it in small screens. -->
        <nav class="mdl-navigation mdl-layout--large-screen-only">
          <a class="mdl-navigation__link" href="">Admin</a>
          <a class="mdl-navigation__link" href="">Git Repo</a>
          <a class="mdl-navigation__link" href="">Contact Us</a>
          <a class="mdl-navigation__link" href="">Project</a>
        </nav>
      </div>
    </header>
    <div class="mdl-layout__drawer">
      <span class="mdl-layout-title">Title</span>
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="">Admin</a>
        <a class="mdl-navigation__link" href="">Git Repo</a>
        <a class="mdl-navigation__link" href="">About Project</a>
        <a class="mdl-navigation__link" href="">Contact Us</a>
      </nav>
    </div>
    <main class="mdl-layout__content">
      <div class="page-content">
          <div class="mdl-grid">
              <div class="mdl-cell mdl-cell--12-col mdl-shadow--16dp">
                  <div id="line-chart"></div>
              </div>
                            
          </div>
          <div class = "mdl-grid">
              <div class="mdl-cell mdl-cell--12-col mdl-shadow--16dp">
                  <div id="line-chart4"></div>
              </div>
          </div>
          <div class = "mdl-grid">
              <div class="mdl-cell mdl-cell--12-col mdl-shadow--16dp">
                  <div id="line-chart5"></div>
              </div>
          </div>
          <div class = "mdl-grid">
            <div class="mdl-cell mdl-cell--12-col mdl-shadow--16dp">
                <div id="line-chart6"></div>
            </div>
        </div>
      </div>
    </main>
  </div>
  

<script src="../static/assets/js/material.min.js"></script>
<script src="../static/assets/js/plotly_min.js"></script>
<script>
  var lineDiv = document.getElementById('line-chart');
  var temp, ycoordinate;
  temp = [1, 2, 3, 4, 6, 7, 8,9,10,11,12,13,14,15,16,17,18,19,20]
  ycoordinate = [1, 2,3,6,8,9,11,15,17,25,19,31,30,27,35 ,29, 36, 34, 30, 31]
  var ycoordinate;
  var traceA = {
    x: temp,
    y: ycoordinate,
    type: 'scatter'
      };

  var data = [traceA];

  var layout = {
    title:'Temperature Variation'
  };

  Plotly.plot( lineDiv, data, layout );

</script>
<script>
    var lineDiv = document.getElementById('line-chart1');
  
    var traceA = {
      x: [1, 2, 3, 4, 6, 7, 8,9,10,11,12,13,14,15,16,17,18,19,20],
      y: [1, 2,3,6,8,9,11,15,17,15,29,21,20,19,25 ,19, 16, 14, 20, 10],
      type: 'scatter'
        };
  
    var data = [traceA];
  
    var layout = {
      title:'Humidity Variation'
    };
  
    Plotly.plot( lineDiv, data, layout );
  </script>
  <script>
      var lineDiv = document.getElementById('line-chart2');
    
      var traceA = {
        x: [1, 2, 3, 4, 6, 7, 8,9,10,11,12,13,14,15,16,17,18,19,20],
        y: [1, 2,3,6,8,9,11,15,17,25,19,31,30,27,35 ,9, 6, 4, 20, 10],
        type: 'scatter'
          };
    
      var data = [traceA];
    
      var layout = {
        title:'PM2.5 Variation'
      };
    
      Plotly.plot( lineDiv, data, layout );
    </script>
    <script>
      var lineDiv = document.getElementById('line-chart3');
    
      var traceA = {
        x: [1, 2, 3, 4, 6, 7, 8,9,10,11,12,13,14,15,16,17,18,19,20],
        y: [1, 2,3,6,8,9,11,15,17,25,19,31,30,27,35 ,9, 6, 4, 20, 10],
        type: 'scatter'
          };
    
      var data = [traceA];
    
      var layout = {
        title:'PM2.5 Variation'
      };
    
      Plotly.plot( lineDiv, data, layout );
    </script>

    
<script type="text/javascript">

  // function posting username
  function postFormData() {
    
    // Default values
    var url_final = "/testapi1";
    var username = "Shailendra";
    var password = "test001";
    var data2 = [];
    var data1 = [];
    $.ajax({
      type: "POST",
      url: url_final,
      dataType: 'json',
      data: JSON.stringify({
        "dev_username": username,
        "dev_password": password
      })
    })
    .done(function(data) {

      // Update the content of labels with json response from EditUpdateProfileData handler
      if(data['result'] === 'Success'){
        //alert(data['result'])
        //alert(JSON.stringify(data['response_content'])) 
        //alert(JSON.stringify(data['response_humidity'])) 
        //alert(JSON.stringify(data['response_dew']))

        data1 = data['response_content'];
	      data2 = data['response_humidity'];
        data3 = data['response_dew'];
        //lert('Request posted successfully')   
      }else{
      	//alert('Error occurred posting');
      }

      // API temperature Variation
      //alert (data1.length);
      var temperature = [];
      var timestamp = [];
      for (var i = 0; i < data1.length; ++i){
        temperature.push(data1[i].temperature);
        timestamp.push(data1[i].time);
      }
      

      var lineDiv = document.getElementById('line-chart4');
      var temp, ycoordinate;
      temp = temperature;
      ycoordinate = timestamp;
      //alert (temp);
      //alert (ycoordinate);
      var traceA = {
          x: ycoordinate,
          y: temp,
          type: 'scatter'
        };

      var data = [traceA];

      var layout = {
        title:'API temperature Variation'
      };
     
      Plotly.plot( lineDiv, data, layout );


      // For Humidity 
      //alert (data2.length);
      var humidityh = [];
      var timestamph = [];
      for (var j = 0; j< data2.length; ++j){
          humidityh.push( data2[j].humidity);
          timestamph.push( data2[j].time);
      }
      //alert (humidityh)
      //alert (timestamph)

      var lineDivdata2 = document.getElementById('line-chart5');
      var hum, timeh;
      temp = humidityh;
      timeh = timestamph;
      //alert (temp);
      //alert (timeh);
      var traceB = {
          x: timeh,
          y: humidityh,
          type: 'scatter'
        };

      var datah = [traceB];

      var layoutB = {
        title:'API humidity Variation'
      };
     
      Plotly.plot( lineDivdata2, datah, layoutB );

      // for dew 
      //alert (data3.length);
      var dew = [];
      var timestampdew = [];
      for (k = 0;k < data3.length; ++k) {

        dew.push(data3[k].dew);
        timestampdew.push(data3[k].time);
      }
      //alert (dew)
      //alert (timestampdew)

      var lineDivdata3 = document.getElementById('line-chart6');
      var dew1, timed;
      dew1 = dew;
      timed = timestampdew;
      //alert (dew1);
      //alert (timed);
      var traceC = {
          x: timed,
          y: dew1,
          type: 'scatter'
        };

      var datad = [traceC];

      var layoutC = {
        title:'API dew Variation'
      };
     
      Plotly.plot( lineDivdata3, datad, layoutC );

    });

    
    
      
  }
  
  </script>
  
</body>
</html>
